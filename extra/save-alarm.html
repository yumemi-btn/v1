<meta charset="utf-8">
<title>ãã‚‚ã®ä¸Šãƒ¦ãƒ¡ãƒŸã‚¢ãƒ©ãƒ¼ãƒ </title>

<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ãã‚‚ã®ä¸Šãƒ¦ãƒ¡ãƒŸã‚¢ãƒ©ãƒ¼ãƒ ">
<meta name="twitter:image" content="https://yumemi-btn.github.io/v1/assets/card.png">

<link rel="icon" href="https://yumemi-btn.github.io/v1/assets/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="https://yumemi-btn.github.io/v1/assets/apple-touch-icon.png">
<script src="//cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/howler/2.1.3/howler.min.js" integrity="sha256-/Q4ZPy6sMbk627wHxuaWSIXS1y7D2KnMhsm/+od7ptE=" crossorigin="anonymous"></script>

<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
    body {
        font-family: "Segoe UI", Meiryo, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        color: rgb(20, 23, 26);
        background-color: #27BBC8;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        justify-content: center;
    }

    a {
        text-decoration: none;
        color: inherit;
    }

    select {
        border: none;
        border-bottom: 1px solid #27BBC8;
        font-size: inherit;
    }

    #app {
        background-color: #fff;
        padding: 15px;
        margin: auto;
        position: relative;
    }

    .profile {
        display: flex;
        font-size: 15px;
    }

    .profile>.icon {
        margin: 0 5px;
    }

    .profile>.icon img {
        border-radius: 100%;
        height: 49px;
        width: 49px;
    }

    .profile>.name {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        justify-content: center;
        margin: 0 5px;
        line-height: 1.2em;
    }

    .profile>.name>.display_name {
        font-weight: bold;
    }

    .profile>.name>.user_name {
        color: rgb(101, 119, 134);
    }

    .content {
        margin: 10px 0;
        font-size: 23px;
    }

    .footer>.date {
        color: rgb(101, 119, 134);
        font-size: 15px;
    }

    .notice {
        position: absolute;
        left: 0;
        right: 0;
        bottom: -4em;
        line-height: 1em;
        background-color: #fff;
        padding: 1em;
        color: rgb(101, 119, 134);
        opacity: 0;
        transition: .3s opacity;
    }

    .notice.display {
        opacity: 1;
    }

    footer {
        color: #fff;
        text-align: center;
    }

</style>

<div id="app">
    <div class="profile">
        <div class="icon">
            <a href="https://twitter.com/Kumonoue_Yumemi/" target="_blank"><img src="../assets/twitter_icon.jpg"></a>
        </div>
        <div class="name">
            <div class="display_name"><a href="https://twitter.com/Kumonoue_Yumemi/" target="_blank">ãã‚‚ã®ä¸Šãƒ¦ãƒ¡ãƒŸğŸ’­</a></div>
            <div class="user_name"><a href="https://twitter.com/Kumonoue_Yumemi/" target="_blank">@Kumonoue_Yumemi</a></div>
        </div>
    </div>
    <div class="content">
        <select name="interval" v-model="interval" v-bind:style="`width: ${interval.name?.length + 0.5}em`">
            <option v-for="interval in intervals" v-bind:value="interval">{{ interval.name }}</option>
        </select>
        ç½®ãã«ï½¢
        <select name="sound" v-model="sound" v-bind:style="`width: ${sound.name?.length + 1}em`">
            <option v-for="sound in sounds" v-bind:value="sound">{{ sound.name }}</option>
        </select>
        ï½£ã¨èã„ã¦ãã‚Œã‚‹ãã‚‚ã®ä¸Šãƒ¦ãƒ¡ãƒŸã‚¢ãƒ©ãƒ¼ãƒ 
    </div>
    <div class="footer">
        <div class="date"><a href="https://twitter.com/Kumonoue_Yumemi/status/1262793723559067648" target="_blank">åˆå‰2:14 Â· 2020å¹´5æœˆ20æ—¥</a></div>
    </div>

    <div class="notice" v-bind:class="{ display: this.notice.display }">{{ notice.message }}</div>
</div>

<footer>æ¨å¥¨ãƒ–ãƒ©ã‚¦ã‚¶: Google Chrome / Author: <a href="https://twitter.com/infinite_chain" target="_blank">ç„¡é™é€£é–è¬›ã®é˜²æ­¢ã«é–¢ã™ã‚‹æ³•å¾‹</a></footer>

<script>
    const app = new Vue({
        el: '#app',
        data: {
            interval: { name: '30åˆ†', value: 30 * 60 * 1000 },
            sound: {
                name: 'ä¿å­˜ã—ãŸï¼Ÿ', filepath: [
                    '/v1/sounds/extra/save-alarm/Yumemi_save1.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save2.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save3.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save4.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save5.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save6.m4a',
                    '/v1/sounds/extra/save-alarm/Yumemi_save7.m4a',
                ]
            },
            intervals: [
                { name: '1æ™‚é–“', value: 1 * 60 * 60 * 1000 },
                { name: '30åˆ†', value: 30 * 60 * 1000 },
                { name: '5åˆ†', value: 5 * 60 * 1000 },
                { name: '1åˆ†', value: 1 * 60 * 1000 },
                { name: '30ç§’', value: 30 * 1000 },
                { name: '5ç§’', value: 5 * 1000 },
                { name: '1ç§’', value: 1 * 1000 },
                { name: '0.5ç§’', value: 0.5 * 1000 },
                { name: '0.25ç§’', value: 0.25 * 1000 },
                { name: '0.1ç§’', value: 0.1 * 1000 },
            ],
            sounds: [
                {
                    name: 'ä¿å­˜ã—ãŸï¼Ÿ', filepath: [
                        '/v1/sounds/extra/save-alarm/Yumemi_save1.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save2.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save3.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save4.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save5.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save6.m4a',
                        '/v1/sounds/extra/save-alarm/Yumemi_save7.m4a',
                    ]
                },
                { name: 'ã¡ã‚ƒã‚“ã¨ä¿å­˜ã—ã¾ã—ãŸã‹ï¼Ÿ', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save1.m4a' },
                { name: 'ã¡ã‚ƒã‚“ã¨ä¿å­˜ã—ãŸãƒ¼ï¼Ÿ', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save2.m4a' },
                { name: 'ä¿å­˜ã—ãªã„ã¨é§„ç›®ã ã‚ˆãƒ¼', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save3.m4a' },
                { name: 'ä¿å­˜ã—ã¦ãªã„ã§ã—ã‚‡', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save4.m4a' },
                { name: 'ä¿å­˜ã—ãŸã®ï¼Ÿ', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save5.m4a' },
                { name: 'ä¿å­˜ã—ã‚ˆã†ã­ï¼ä¿å­˜ã€ä¿å­˜', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save6.m4a' },
                { name: 'ãƒ‡ãƒ¼ã‚¿é£›ã‚“ã˜ã‚ƒã£ã¦ã‚‚çŸ¥ã‚‰ãªã„ã‹ã‚‰ã­ï¼', filepath: '/v1/sounds/extra/save-alarm/Yumemi_save7.m4a' },
                { name: 'ã„ãƒ¼æ„Ÿã˜ï¼Ÿ', filepath: '/v1/sounds/200514/72-ã„ãƒ¼æ„Ÿã˜ï¼Ÿ.m4a' },
                { name: 'ãˆã©ã†ã©ã†ã©ã†ã©ã†ã€ã„ã„æ„Ÿã˜ï¼Ÿ', filepath: '/v1/sounds/200423/10-ãˆ%20ã©ã†ã©ã†ã©ã†ã©ã†%20ã„ã„æ„Ÿã˜ï¼Ÿ.m4a' },
                { name: 'ãƒ¦ãƒ¡ãƒŸã‚‚è² ã‘ãªã„ãŒï¼Ÿ', filepath: '/v1/sounds/200429/12-ãƒ¦ãƒ¡ãƒŸã‚‚è² ã‘ãªã„ãŒï¼Ÿ.m4a' },
                { name: 'ä¸Šæ‰‹ã«å‡ºæ¥ã¾ã—ãŸã‹ï¼Ÿ', filepath: '/v1/sounds/200429/96-ä¸Šæ‰‹ã«å‡ºæ¥ã¾ã—ãŸã‹ï¼Ÿ.m4a' },
                { name: 'èµ·ãã¦ã‚‹ï¼Ÿ', filepath: '/v1/sounds/200423/180-èµ·ãã¦ã‚‹ï¼Ÿ.m4a' },
                { name: 'ãˆã¾ã èµ·ãã¦ã‚‹ãƒ¼ï¼Ÿ', filepath: '/v1/sounds/200423/182-ãˆã¾ã èµ·ãã¦ã‚‹ãƒ¼ï¼Ÿ.m4a' },
                { name: 'å¯æ„›ã‹ã£ãŸï½ãï¼Ÿ', filepath: '/v1/sounds/200505/06-å¯æ„›ã‹ã£ãŸï½ãï¼Ÿ.m4a' },
                { name: 'èã“ãˆã¦ã¾ã™ã‹ãƒ¼ï¼Ÿ', filepath: '/v1/sounds/200514/247-èã“ãˆã¦ã¾ã™ã‹ãƒ¼ï¼Ÿ.m4a' },
                { name: 'ãã‚Œã¯ãƒã‚«ãªã®ã§ã¯ï¼Ÿ', filepath: '/v1/sounds/200423/383-ãã‚Œã¯ãƒã‚«ãªã®ã§ã¯ï¼Ÿ.m4a' },
                { name: 'ã‚‚ã†ä¸€å›å‡ºæ¥ã‚‹ï¼Ÿ', filepath: '/v1/sounds/200429/72-ã‚‚ã†ä¸€å›å‡ºæ¥ã‚‹ï¼Ÿ.m4a' },
                { name: 'ãŠå‰é ­ãã‚‹ã£ã¨ã‚“ã‹ï¼Ÿ', filepath: '/v1/sounds/200429/54-ãŠå‰é ­ãã‚‹ã£ã¨ã‚“ã‹ï¼Ÿ.m4a' },
                { name: 'ã–ã“ã§ã™ã‚‚ã‚“ã­ï¼Ÿ', filepath: '/v1/sounds/200429/87-ã–ã“ã§ã™ã‚‚ã‚“ã­ï¼Ÿ.m4a' },
                { name: 'ç«¥è²ã•ã‚“ï¼Ÿ', filepath: '/v1/sounds/200505/31-ç«¥è²ã•ã‚“ï¼Ÿ(ãƒ‰ã‚¹ã®åˆ©ã„ãŸå£°).m4a' },
            ],
            timer: '',
            notice: {
                message: '',
                display: false,
                timer: null,
            }
        },
        watch: {
            interval: function () {
                this.startTimer()
                this.notify("é–“éš”ãŒå¤‰æ›´ã•ã‚ŒãŸã®ã§ã€ã‚¿ã‚¤ãƒãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸï¼")
            }
        },
        mounted: function () {
            this.timer = new Worker('./save-alarm-worker.js')
            this.timer.onmessage = this.playSound
            this.startTimer()
            this.notify("ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã—ãŸï¼")
        },
        methods: {
            playSound: function () {
                let sound = this.sound.filepath
                if (Array.isArray(sound)) {
                    sound = sound[Math.floor(Math.random() * sound.length)]
                }

                (new Howl({ src: sound })).play()
            },
            startTimer: function () {
                if (!this.interval) { return }
                this.timer.postMessage(this.interval.value)
            },
            notify: function (message) {
                clearTimeout(this.notice.timer)
                this.notice.message = message
                this.notice.display = true
                this.notice.timer = setTimeout(() => { this.notice.display = false }, 5000)
            }
        }
    })
</script>
